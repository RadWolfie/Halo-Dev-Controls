;notes by Jesus7Freak
;haloce1.09 p0 rpg_beta6_2
;console 004C9BE3

...1 ;inspect
0048D1E3   FF52 0C          CALL DWORD PTR DS:[EDX+C] ;EDX=005F5DD8   haloce.0048C8D0
...2 ;cinematic_screen_effect_start
0048D1E3   FF52 0C          CALL DWORD PTR DS:[EDX+C] ;EDX=005F8DD4   haloce.00483F10
...3 ;cinematic_screen_effect_start
0048D1E3   FF52 0C          CALL DWORD PTR DS:[EDX+C] ;EDX=005F8DD4   haloce.00483F10
...4 ;inspect
0048D1E3   FF52 0C          CALL DWORD PTR DS:[EDX+C] ;EDX=005F5DD8   haloce.0048C8D0


...2
0048D1E3   FF52 0C          CALL DWORD PTR DS:[EDX+C] ;EDX=005F8DD4   haloce.00483F10

00483F10   0FBF4424 04      MOVSX EAX,WORD PTR SS:[ESP+4]
00483F15   8B0485 18416200  MOV EAX,DWORD PTR DS:[EAX*4+624118]
00483F1C   8B4C24 0C        MOV ECX,DWORD PTR SS:[ESP+C]
00483F20   56               PUSH ESI
00483F21   8B7424 0C        MOV ESI,DWORD PTR SS:[ESP+C]
00483F25   51               PUSH ECX
00483F26   8D50 1C          LEA EDX,DWORD PTR DS:[EAX+1C]
00483F29   0FBF40 1A        MOVSX EAX,WORD PTR DS:[EAX+1A]
00483F2D   52               PUSH EDX
00483F2E   50               PUSH EAX
00483F2F   56               PUSH ESI
00483F30   E8 6B960000      CALL haloce.0048D5A0
00483F35   83C4 10          ADD ESP,10
00483F38   85C0             TEST EAX,EAX ;EAX=00000000
00483F3A   74 35            JE SHORT haloce.00483F71
;00483F3C   8B15 7C826B00    MOV EDX,DWORD PTR DS:[6B827C]
;00483F42   85D2             TEST EDX,EDX
;00483F44   74 21            JE SHORT haloce.00483F67
;00483F46   8038 00          CMP BYTE PTR DS:[EAX],0
;00483F49   75 07            JNZ SHORT haloce.00483F52
;00483F4B   8A42 39          MOV AL,BYTE PTR DS:[EDX+39]
;00483F4E   84C0             TEST AL,AL
;00483F50   75 11            JNZ SHORT haloce.00483F63
;00483F52   57               PUSH EDI
;00483F53   B9 0E000000      MOV ECX,0E
;00483F58   33C0             XOR EAX,EAX
;00483F5A   8BFA             MOV EDI,EDX
;00483F5C   F3:AB            REP STOS DWORD PTR ES:[EDI]
;00483F5E   C642 39 01       MOV BYTE PTR DS:[EDX+39],1
;00483F62   5F               POP EDI
;00483F63   C642 38 01       MOV BYTE PTR DS:[EDX+38],1
;00483F67   8BCE             MOV ECX,ESI
;00483F69   33C0             XOR EAX,EAX
;00483F6B   5E               POP ESI
;00483F6C   E9 1F940000      JMP haloce.0048D390
00483F71   5E               POP ESI
00483F72   C3               RETN

...3
0048D1E3   FF52 0C          CALL DWORD PTR DS:[EDX+C] ;EDX=005F8DD4   haloce.00483F10

00483F10   0FBF4424 04      MOVSX EAX,WORD PTR SS:[ESP+4] ;->EAX=000001A6
00483F15   8B0485 18416200  MOV EAX,DWORD PTR DS:[EAX*4+624118] ;->EAX=005F8DD4
00483F1C   8B4C24 0C        MOV ECX,DWORD PTR SS:[ESP+C] ;->ECX=403D9900
00483F20   56               PUSH ESI
00483F21   8B7424 0C        MOV ESI,DWORD PTR SS:[ESP+C] ;->ESI=F373000A
00483F25   51               PUSH ECX
00483F26   8D50 1C          LEA EDX,DWORD PTR DS:[EAX+1C] ;->EDX=005F8DF0
00483F29   0FBF40 1A        MOVSX EAX,WORD PTR DS:[EAX+1A] ;->EAX=00000001

00483F2D   52               PUSH EDX ;005F8DF0
00483F2E   50               PUSH EAX ;00000001
00483F2F   56               PUSH ESI ;F373000A
00483F30   E8 6B960000      CALL haloce.0048D5A0
00483F35   83C4 10          ADD ESP,10

00483F38   85C0             TEST EAX,EAX ;->EAX=403D9A3A
00483F3A   74 35            JE SHORT haloce.00483F71
00483F3C   8B15 7C826B00    MOV EDX,DWORD PTR DS:[6B827C] ;->EDX=4000015C
00483F42   85D2             TEST EDX,EDX
00483F44   74 21            JE SHORT haloce.00483F67
00483F46   8038 00          CMP BYTE PTR DS:[EAX],0 ;[EAX]=01
00483F49   75 07            JNZ SHORT haloce.00483F52
;00483F4B   8A42 39          MOV AL,BYTE PTR DS:[EDX+39]
;00483F4E   84C0             TEST AL,AL
;00483F50   75 11            JNZ SHORT haloce.00483F63
00483F52   57               PUSH EDI
00483F53   B9 0E000000      MOV ECX,0E ;(14)
00483F58   33C0             XOR EAX,EAX
00483F5A   8BFA             MOV EDI,EDX ;->EDI=4000015C
00483F5C   F3:AB            REP STOS DWORD PTR ES:[EDI]
 ;ECX=0000000E (decimal 14.)
 ;EAX=00000000
 ;ES:[EDI]=[4000015C]=00000000

 ;ECX=0000000D (decimal 13.)
 ;EAX=00000000
 ;ES:[EDI]=[40000160]=00000000

 ;ECX=0000000C (decimal 12.)
 ;EAX=00000000
 ;ES:[EDI]=[40000164]=00000000

 ;ECX=0000000B (decimal 11.)
 ;EAX=00000000
 ;ES:[EDI]=[40000168]=00000000

 ;ECX=0000000A (decimal 10.)
 ;EAX=00000000
 ;ES:[EDI]=[4000016C]=00000000

 ;ECX=00000009 (decimal 9.)
 ;EAX=00000000
 ;ES:[EDI]=[40000170]=00000000

 ;ECX=00000008 (decimal 8.)
 ;EAX=00000000
 ;ES:[EDI]=[40000174]=00000000

 ;ECX=00000007 (decimal 7.)
 ;EAX=00000000
 ;ES:[EDI]=[40000178]=00000000

 ;ECX=00000006 (decimal 6.)
 ;EAX=00000000
 ;ES:[EDI]=[4000017C]=00000000

 ;ECX=00000005 (decimal 5.)
 ;EAX=00000000
 ;ES:[EDI]=[40000180]=00000000

 ;ECX=00000004 (decimal 4.)
 ;EAX=00000000
 ;ES:[EDI]=[40000184]=00000000

 ;ECX=00000003 (decimal 3.)
 ;EAX=00000000
 ;ES:[EDI]=[40000188]=00000000

 ;ECX=00000002 (decimal 2.)
 ;EAX=00000000
 ;ES:[EDI]=[4000018C]=00000000

 ;ECX=00000001 (decimal 1.)
 ;EAX=00000000
 ;ES:[EDI]=[40000190]=00000000


00483F5E   C642 39 01       MOV BYTE PTR DS:[EDX+39],1 ;DS:[40000195]=00 -> 01
00483F62   5F               POP EDI
00483F63   C642 38 01       MOV BYTE PTR DS:[EDX+38],1 ;DS:[40000194]=00 -> 01
00483F67   8BCE             MOV ECX,ESI
00483F69   33C0             XOR EAX,EAX
00483F6B   5E               POP ESI
00483F6C   E9 1F940000      JMP haloce.0048D390
;00483F71   5E               POP ESI
;00483F72   C3               RETN
...
0048D390   81E1 FFFF0000    AND ECX,0FFFF
0048D396   56               PUSH ESI
0048D397   8BF1             MOV ESI,ECX
0048D399   8B0D B0558100    MOV ECX,DWORD PTR DS:[8155B0]
0048D39F   69F6 18020000    IMUL ESI,ESI,218
0048D3A5   57               PUSH EDI
0048D3A6   8B79 34          MOV EDI,DWORD PTR DS:[ECX+34]
0048D3A9   8B5437 10        MOV EDX,DWORD PTR DS:[EDI+ESI+10]
0048D3AD   8B4A 04          MOV ECX,DWORD PTR DS:[EDX+4]
0048D3B0   8B15 B4558100    MOV EDX,DWORD PTR DS:[8155B4]
0048D3B6   8B52 34          MOV EDX,DWORD PTR DS:[EDX+34]
0048D3B9   03FE             ADD EDI,ESI
0048D3BB   81E1 FFFF0000    AND ECX,0FFFF
0048D3C1   8D0C89           LEA ECX,DWORD PTR DS:[ECX+ECX*4]
0048D3C4   8D0C8A           LEA ECX,DWORD PTR DS:[EDX+ECX*4]
0048D3C7   F641 06 02       TEST BYTE PTR DS:[ECX+6],2
0048D3CB   0FBF51 02        MOVSX EDX,WORD PTR DS:[ECX+2]
0048D3CF   75 0C            JNZ SHORT haloce.0048D3DD
0048D3D1   8B1495 18416200  MOV EDX,DWORD PTR DS:[EDX*4+624118]
0048D3D8   66:8B12          MOV DX,WORD PTR DS:[EDX]
0048D3DB   EB 16            JMP SHORT haloce.0048D3F3
0048D3DD   6BD2 5C          IMUL EDX,EDX,5C
0048D3E0   53               PUSH EBX
0048D3E1   8B1D 6C226E00    MOV EBX,DWORD PTR DS:[6E226C]
0048D3E7   8B9B A0040000    MOV EBX,DWORD PTR DS:[EBX+4A0]
0048D3ED   66:8B541A 22     MOV DX,WORD PTR DS:[EDX+EBX+22]
0048D3F2   5B               POP EBX
0048D3F3   66:8B49 04       MOV CX,WORD PTR DS:[ECX+4]
0048D3F7   66:3BD1          CMP DX,CX
0048D3FA   74 47            JE SHORT haloce.0048D443
0048D3FC   66:83FA 03       CMP DX,3
0048D400   74 41            JE SHORT haloce.0048D443
0048D402   66:83F9 2B       CMP CX,2B
0048D406   7C 06            JL SHORT haloce.0048D40E
0048D408   66:83F9 30       CMP CX,30
0048D40C   7E 35            JLE SHORT haloce.0048D443
0048D40E   66:83F9 25       CMP CX,25
0048D412   7C 19            JL SHORT haloce.0048D42D
0048D414   66:83F9 2A       CMP CX,2A
0048D418   7F 13            JG SHORT haloce.0048D42D
0048D41A   66:83FA 2B       CMP DX,2B
0048D41E   7C 23            JL SHORT haloce.0048D443
0048D420   66:83FA 30       CMP DX,30
0048D424   7F 1D            JG SHORT haloce.0048D443
0048D426   E8 25DC0600      CALL haloce.004FB050
0048D42B   EB 16            JMP SHORT haloce.0048D443
0048D42D   0FBFC9           MOVSX ECX,CX
0048D430   6BC9 31          IMUL ECX,ECX,31
0048D433   0FBFD2           MOVSX EDX,DX
0048D436   03CA             ADD ECX,EDX
0048D438   50               PUSH EAX
0048D439   FF148D 00726200  CALL DWORD PTR DS:[ECX*4+627200]
0048D440   83C4 04          ADD ESP,4
0048D443   8B4F 10          MOV ECX,DWORD PTR DS:[EDI+10]
0048D446   8B11             MOV EDX,DWORD PTR DS:[ECX]
0048D448   8B4A 08          MOV ECX,DWORD PTR DS:[EDX+8]
0048D44B   8B15 B0558100    MOV EDX,DWORD PTR DS:[8155B0]
0048D451   8901             MOV DWORD PTR DS:[ECX],EAX
0048D453   8B42 34          MOV EAX,DWORD PTR DS:[EDX+34]
0048D456   8B4C30 10        MOV ECX,DWORD PTR DS:[EAX+ESI+10]
0048D45A   8B11             MOV EDX,DWORD PTR DS:[ECX]
0048D45C   03C6             ADD EAX,ESI
0048D45E   5F               POP EDI
0048D45F   8950 10          MOV DWORD PTR DS:[EAX+10],EDX
0048D462   5E               POP ESI
0048D463   C3               RETN


